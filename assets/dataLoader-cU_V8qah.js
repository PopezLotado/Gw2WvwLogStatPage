import{a as c}from"./index-C6kLQFz1.js";const l=(a,t)=>{const r=[];let e=c(a);const n=c(t);for(;e.isBefore(n)||e.isSame(n,"day");)r.push(e.format("YYYY-MM-DD")),e=e.add(1,"day");return r},D=async a=>{try{const t=await fetch(`/data/${a}.json`);return t.ok?await t.json():(console.warn(`无法加载 ${a} 的数据`),[])}catch(t){return console.error(`加载 ${a} 数据失败:`,t),[]}},y=()=>{const a=c();return[a.subtract(7,"day"),a]},Y=async a=>{try{const t=a.dateRange[0].format("YYYY-MM-DD"),r=a.dateRange[1].format("YYYY-MM-DD"),n=l(t,r).map(async d=>{let s=await D(d);return a.playerIds.length>0&&(s=s.filter(o=>a.playerIds.includes(o.id))),a.profession&&(s=s.filter(o=>o.profession===a.profession)),{date:d,data:s}});return await Promise.all(n)}catch(t){return console.error("加载数据失败:",t),[]}};export{y as g,Y as l};
