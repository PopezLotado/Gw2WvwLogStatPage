import{e as ie,S as Y,c as De,a as Be,i as Z,b as Ke,m as Ye,p as et,d as tt,f as at,C as rt,g as oe,h as nt,j as ye,k as it,r as _e,_ as q,l as ge,n as ot,o as st,u as re,s as lt,q as se,t as be,v as ut,Z as vt,w as Ae,x as He,y as pe,z as ae,A as Ie,B as ct,G as le,D as ft,E as ht,F as mt,H as ne,I as Ue,P as gt,J as Pe,K as Ce,L as We,R as pt,M as ee,N as dt,O as yt,Q as we,T as Ne,U as ke,V as Ee,W as ve,X as Le,Y as bt,$ as St,a0 as Dt,a1 as _t,a2 as Oe,a3 as At,a4 as It,a5 as Pt,a6 as Ct,a7 as wt,a8 as Nt,a9 as kt,aa as Et,ab as Lt,ac as Ot}from"./install-BhaJYa61.js";import{g as Tt,l as Mt}from"./dataLoader-ne8s10U6.js";import{d as Rt,r as Q,c as Te,w as Me,a as ce,o as Gt,b as Ft,e as x,f as te,g as K,h as Vt,i as fe,j as zt,u as $t,k as xt,_ as Bt}from"./index-C4s78o-k.js";var Ht=function(){function n(t){this.coordSysDims=[],this.axisMap=De(),this.categoryAxisMap=De(),this.coordSysName=t}return n}();function Ut(n){var t=n.get("coordinateSystem"),e=new Ht(t),a=Wt[t];if(a)return a(n,e,e.axisMap,e.categoryAxisMap),e}var Wt={cartesian2d:function(n,t,e,a){var o=n.getReferringComponents("xAxis",Y).models[0],r=n.getReferringComponents("yAxis",Y).models[0];t.coordSysDims=["x","y"],e.set("x",o),e.set("y",r),X(o)&&(a.set("x",o),t.firstCategoryDimIndex=0),X(r)&&(a.set("y",r),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(n,t,e,a){var o=n.getReferringComponents("singleAxis",Y).models[0];t.coordSysDims=["single"],e.set("single",o),X(o)&&(a.set("single",o),t.firstCategoryDimIndex=0)},polar:function(n,t,e,a){var o=n.getReferringComponents("polar",Y).models[0],r=o.findAxisModel("radiusAxis"),i=o.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],e.set("radius",r),e.set("angle",i),X(r)&&(a.set("radius",r),t.firstCategoryDimIndex=0),X(i)&&(a.set("angle",i),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(n,t,e,a){t.coordSysDims=["lng","lat"]},parallel:function(n,t,e,a){var o=n.ecModel,r=o.getComponent("parallel",n.get("parallelIndex")),i=t.coordSysDims=r.dimensions.slice();ie(r.parallelAxisIndex,function(s,v){var l=o.getComponent("parallelAxis",s),f=i[v];e.set(f,l),X(l)&&(a.set(f,l),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=v))})}};function X(n){return n.get("type")==="category"}function Xt(n,t){var e=n.get("coordinateSystem"),a=rt.get(e),o;return t&&t.coordSysDims&&(o=oe(t.coordSysDims,function(r){var i={name:r},s=t.axisMap.get(r);if(s){var v=s.get("type");i.type=nt(v)}return i})),o||(o=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]),o}function jt(n,t,e){var a,o;return e&&ie(n,function(r,i){var s=r.coordDim,v=e.categoryAxisMap.get(s);v&&(a==null&&(a=i),r.ordinalMeta=v.getOrdinalMeta(),t&&(r.createInvertedIndices=!0)),r.otherDims.itemName!=null&&(o=!0)}),!o&&a!=null&&(n[a].otherDims.itemName=0),a}function Zt(n,t,e){e=e||{};var a=t.getSourceManager(),o,r=!1;o=a.getSource(),r=o.sourceFormat===Be;var i=Ut(t),s=Xt(t,i),v=e.useEncodeDefaulter,l=Z(v)?v:v?Ke(Ye,s,t):null,f={coordDimensions:s,generateCoord:e.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:l,canOmitUnusedDimensions:!r},u=et(o,f),c=jt(u.dimensions,e.createInvertedIndices,i),h=r?null:a.getSharedDataStore(u),m=tt(t,{schema:u,store:h}),g=new at(u,t);g.setCalculationInfo(m);var b=c!=null&&qt(o)?function(y,d,p,S){return S===c?p:this.defaultDimValueGetter(y,d,p,S)}:null;return g.hasItemOption=!1,g.initData(r?o:h,null,b),g}function qt(n){if(n.sourceFormat===Be){var t=Jt(n.data||[]);return!ye(it(t))}}function Jt(n){for(var t=0;t<n.length&&n[t]==null;)t++;return n[t]}var Xe=typeof Float32Array<"u",Qt=Xe?Float32Array:Array;function j(n){return ye(n)?Xe?new Float32Array(n):n:new Qt(n)}function je(n,t){var e=n.mapDimensionsAll("defaultedLabel"),a=e.length;if(a===1){var o=_e(n,t,e[0]);return o!=null?o+"":null}else if(a){for(var r=[],i=0;i<e.length;i++)r.push(_e(n,t,e[i]));return r.join(" ")}}function Kt(n,t){var e=n.mapDimensionsAll("defaultedLabel");if(!ye(t))return t+"";for(var a=[],o=0;o<e.length;o++){var r=n.getDimensionIndex(e[o]);r>=0&&a.push(t[r])}return a.join(" ")}var Se=function(n){q(t,n);function t(e,a,o,r){var i=n.call(this)||this;return i.updateData(e,a,o,r),i}return t.prototype._createSymbol=function(e,a,o,r,i){this.removeAll();var s=ge(e,-1,-1,2,2,null,i);s.attr({z2:100,culling:!0,scaleX:r[0]/2,scaleY:r[1]/2}),s.drift=Yt,this._symbolType=e,this.add(s)},t.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){ot(this.childAt(0))},t.prototype.downplay=function(){st(this.childAt(0))},t.prototype.setZ=function(e,a){var o=this.childAt(0);o.zlevel=e,o.z=a},t.prototype.setDraggable=function(e,a){var o=this.childAt(0);o.draggable=e,o.cursor=!a&&e?"move":o.cursor},t.prototype.updateData=function(e,a,o,r){this.silent=!1;var i=e.getItemVisual(a,"symbol")||"circle",s=e.hostModel,v=t.getSymbolSize(e,a),l=i!==this._symbolType,f=r&&r.disableAnimation;if(l){var u=e.getItemVisual(a,"symbolKeepAspect");this._createSymbol(i,e,a,v,u)}else{var c=this.childAt(0);c.silent=!1;var h={scaleX:v[0]/2,scaleY:v[1]/2};f?c.attr(h):re(c,h,s,a),lt(c)}if(this._updateCommon(e,a,v,o,r),l){var c=this.childAt(0);if(!f){var h={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:c.style.opacity}};c.scaleX=c.scaleY=0,c.style.opacity=0,se(c,h,s,a)}}f&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(e,a,o,r,i){var s=this.childAt(0),v=e.hostModel,l,f,u,c,h,m,g,b,y;if(r&&(l=r.emphasisItemStyle,f=r.blurItemStyle,u=r.selectItemStyle,c=r.focus,h=r.blurScope,g=r.labelStatesModels,b=r.hoverScale,y=r.cursorStyle,m=r.emphasisDisabled),!r||e.hasItemOption){var d=r&&r.itemModel?r.itemModel:e.getItemModel(a),p=d.getModel("emphasis");l=p.getModel("itemStyle").getItemStyle(),u=d.getModel(["select","itemStyle"]).getItemStyle(),f=d.getModel(["blur","itemStyle"]).getItemStyle(),c=p.get("focus"),h=p.get("blurScope"),m=p.get("disabled"),g=be(d),b=p.getShallow("scale"),y=d.getShallow("cursor")}var S=e.getItemVisual(a,"symbolRotate");s.attr("rotation",(S||0)*Math.PI/180||0);var _=ut(e.getItemVisual(a,"symbolOffset"),o);_&&(s.x=_[0],s.y=_[1]),y&&s.attr("cursor",y);var A=e.getItemVisual(a,"style"),D=A.fill;if(s instanceof vt){var N=s.style;s.useStyle(Ae({image:N.image,x:N.x,y:N.y,width:N.width,height:N.height},A))}else s.__isEmptyBrush?s.useStyle(Ae({},A)):s.useStyle(A),s.style.decal=null,s.setColor(D,i&&i.symbolInnerColor),s.style.strokeNoScale=!0;var C=e.getItemVisual(a,"liftZ"),P=this._z2;C!=null?P==null&&(this._z2=s.z2,s.z2+=C):P!=null&&(s.z2=P,this._z2=null);var w=i&&i.useNameLabel;He(s,g,{labelFetcher:v,labelDataIndex:a,defaultText:I,inheritColor:D,defaultOpacity:A.opacity});function I(O){return w?e.getName(O):je(e,O)}this._sizeX=o[0]/2,this._sizeY=o[1]/2;var k=s.ensureState("emphasis");k.style=l,s.ensureState("select").style=u,s.ensureState("blur").style=f;var M=b==null||b===!0?Math.max(1.1,3/this._sizeY):isFinite(b)&&b>0?+b:1;k.scaleX=this._sizeX*M,k.scaleY=this._sizeY*M,this.setSymbolScale(1),pe(this,c,h,m)},t.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},t.prototype.fadeOut=function(e,a,o){var r=this.childAt(0),i=ae(this).dataIndex,s=o&&o.animation;if(this.silent=r.silent=!0,o&&o.fadeLabel){var v=r.getTextContent();v&&Ie(v,{style:{opacity:0}},a,{dataIndex:i,removeOpt:s,cb:function(){r.removeTextContent()}})}else r.removeTextContent();Ie(r,{style:{opacity:0},scaleX:0,scaleY:0},a,{dataIndex:i,cb:e,removeOpt:s})},t.getSymbolSize=function(e,a){return ct(e.getItemVisual(a,"symbolSize"))},t}(le);function Yt(n,t){this.parent.drift(n,t)}function he(n,t,e,a){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(a.isIgnore&&a.isIgnore(e))&&!(a.clipShape&&!a.clipShape.contain(t[0],t[1]))&&n.getItemVisual(e,"symbol")!=="none"}function Re(n){return n!=null&&!ht(n)&&(n={isIgnore:n}),n||{}}function Ge(n){var t=n.hostModel,e=t.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),emphasisDisabled:e.get("disabled"),hoverScale:e.get("scale"),labelStatesModels:be(t),cursorStyle:t.get("cursor")}}var ea=function(){function n(t){this.group=new le,this._SymbolCtor=t||Se}return n.prototype.updateData=function(t,e){this._progressiveEls=null,e=Re(e);var a=this.group,o=t.hostModel,r=this._data,i=this._SymbolCtor,s=e.disableAnimation,v=Ge(t),l={disableAnimation:s},f=e.getSymbolPoint||function(u){return t.getItemLayout(u)};r||a.removeAll(),t.diff(r).add(function(u){var c=f(u);if(he(t,c,u,e)){var h=new i(t,u,v,l);h.setPosition(c),t.setItemGraphicEl(u,h),a.add(h)}}).update(function(u,c){var h=r.getItemGraphicEl(c),m=f(u);if(!he(t,m,u,e)){a.remove(h);return}var g=t.getItemVisual(u,"symbol")||"circle",b=h&&h.getSymbolType&&h.getSymbolType();if(!h||b&&b!==g)a.remove(h),h=new i(t,u,v,l),h.setPosition(m);else{h.updateData(t,u,v,l);var y={x:m[0],y:m[1]};s?h.attr(y):re(h,y,o)}a.add(h),t.setItemGraphicEl(u,h)}).remove(function(u){var c=r.getItemGraphicEl(u);c&&c.fadeOut(function(){a.remove(c)},o)}).execute(),this._getSymbolPoint=f,this._data=t},n.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl(function(a,o){var r=t._getSymbolPoint(o);a.setPosition(r),a.markRedraw()})},n.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=Ge(t),this._data=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(t,e,a){this._progressiveEls=[],a=Re(a);function o(v){v.isGroup||(v.incremental=!0,v.ensureState("emphasis").hoverLayer=!0)}for(var r=t.start;r<t.end;r++){var i=e.getItemLayout(r);if(he(e,i,r,a)){var s=new this._SymbolCtor(e,r,this._seriesScope);s.traverse(o),s.setPosition(i),this.group.add(s),e.setItemGraphicEl(r,s),this._progressiveEls.push(s)}}},n.prototype.eachRendered=function(t){ft(this._progressiveEls||this.group,t)},n.prototype.remove=function(t){var e=this.group,a=this._data;a&&t?a.eachItemGraphicEl(function(o){o.fadeOut(function(){e.remove(o)},a.hostModel)}):e.removeAll()},n}();function ta(n,t){return n.type===t}var aa=function(n){q(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e){return Zt(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(e){var a=new le,o=ge("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);a.add(o),o.setStyle(e.lineStyle);var r=this.getData().getVisual("symbol"),i=this.getData().getVisual("symbolRotate"),s=r==="none"?"circle":r,v=e.itemHeight*.8,l=ge(s,(e.itemWidth-v)/2,(e.itemHeight-v)/2,v,v,e.itemStyle.fill);a.add(l),l.setStyle(e.itemStyle);var f=e.iconRotate==="inherit"?i:e.iconRotate||0;return l.rotation=f*Math.PI/180,l.setOrigin([e.itemWidth/2,e.itemHeight/2]),s.indexOf("empty")>-1&&(l.style.stroke=l.style.fill,l.style.fill="#fff",l.style.lineWidth=2),a},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(mt);function Ze(n,t,e){var a=n.getBaseAxis(),o=n.getOtherAxis(a),r=ra(o,e),i=a.dim,s=o.dim,v=t.mapDimension(s),l=t.mapDimension(i),f=s==="x"||s==="radius"?1:0,u=oe(n.dimensions,function(m){return t.mapDimension(m)}),c=!1,h=t.getCalculationInfo("stackResultDimension");return ne(t,u[0])&&(c=!0,u[0]=h),ne(t,u[1])&&(c=!0,u[1]=h),{dataDimsForPoint:u,valueStart:r,valueAxisDim:s,baseAxisDim:i,stacked:!!c,valueDim:v,baseDim:l,baseDataOffset:f,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function ra(n,t){var e=0,a=n.scale.getExtent();return t==="start"?e=a[0]:t==="end"?e=a[1]:Ue(t)&&!isNaN(t)?e=t:a[0]>0?e=a[0]:a[1]<0&&(e=a[1]),e}function qe(n,t,e,a){var o=NaN;n.stacked&&(o=e.get(e.getCalculationInfo("stackedOverDimension"),a)),isNaN(o)&&(o=n.valueStart);var r=n.baseDataOffset,i=[];return i[r]=e.get(n.baseDim,a),i[1-r]=o,t.dataToPoint(i)}function na(n,t){var e=[];return t.diff(n).add(function(a){e.push({cmd:"+",idx:a})}).update(function(a,o){e.push({cmd:"=",idx:o,idx1:a})}).remove(function(a){e.push({cmd:"-",idx:a})}).execute(),e}function ia(n,t,e,a,o,r,i,s){for(var v=na(n,t),l=[],f=[],u=[],c=[],h=[],m=[],g=[],b=Ze(o,t,i),y=n.getLayout("points")||[],d=t.getLayout("points")||[],p=0;p<v.length;p++){var S=v[p],_=!0,A=void 0,D=void 0;switch(S.cmd){case"=":A=S.idx*2,D=S.idx1*2;var N=y[A],C=y[A+1],P=d[D],w=d[D+1];(isNaN(N)||isNaN(C))&&(N=P,C=w),l.push(N,C),f.push(P,w),u.push(e[A],e[A+1]),c.push(a[D],a[D+1]),g.push(t.getRawIndex(S.idx1));break;case"+":var I=S.idx,k=b.dataDimsForPoint,M=o.dataToPoint([t.get(k[0],I),t.get(k[1],I)]);D=I*2,l.push(M[0],M[1]),f.push(d[D],d[D+1]);var O=qe(b,o,t,I);u.push(O[0],O[1]),c.push(a[D],a[D+1]),g.push(t.getRawIndex(I));break;case"-":_=!1}_&&(h.push(S),m.push(m.length))}m.sort(function(R,ue){return g[R]-g[ue]});for(var T=l.length,V=j(T),E=j(T),L=j(T),z=j(T),$=[],p=0;p<m.length;p++){var J=m[p],G=p*2,F=J*2;V[G]=l[F],V[G+1]=l[F+1],E[G]=f[F],E[G+1]=f[F+1],L[G]=u[F],L[G+1]=u[F+1],z[G]=c[F],z[G+1]=c[F+1],$[p]=h[J]}return{current:V,next:E,stackedOnCurrent:L,stackedOnNext:z,status:$}}var B=Math.min,H=Math.max;function W(n,t){return isNaN(n)||isNaN(t)}function de(n,t,e,a,o,r,i,s,v){for(var l,f,u,c,h,m,g=e,b=0;b<a;b++){var y=t[g*2],d=t[g*2+1];if(g>=o||g<0)break;if(W(y,d)){if(v){g+=r;continue}break}if(g===e)n[r>0?"moveTo":"lineTo"](y,d),u=y,c=d;else{var p=y-l,S=d-f;if(p*p+S*S<.5){g+=r;continue}if(i>0){for(var _=g+r,A=t[_*2],D=t[_*2+1];A===y&&D===d&&b<a;)b++,_+=r,g+=r,A=t[_*2],D=t[_*2+1],y=t[g*2],d=t[g*2+1],p=y-l,S=d-f;var N=b+1;if(v)for(;W(A,D)&&N<a;)N++,_+=r,A=t[_*2],D=t[_*2+1];var C=.5,P=0,w=0,I=void 0,k=void 0;if(N>=a||W(A,D))h=y,m=d;else{P=A-l,w=D-f;var M=y-l,O=A-y,T=d-f,V=D-d,E=void 0,L=void 0;if(s==="x"){E=Math.abs(M),L=Math.abs(O);var z=P>0?1:-1;h=y-z*E*i,m=d,I=y+z*L*i,k=d}else if(s==="y"){E=Math.abs(T),L=Math.abs(V);var $=w>0?1:-1;h=y,m=d-$*E*i,I=y,k=d+$*L*i}else E=Math.sqrt(M*M+T*T),L=Math.sqrt(O*O+V*V),C=L/(L+E),h=y-P*i*(1-C),m=d-w*i*(1-C),I=y+P*i*C,k=d+w*i*C,I=B(I,H(A,y)),k=B(k,H(D,d)),I=H(I,B(A,y)),k=H(k,B(D,d)),P=I-y,w=k-d,h=y-P*E/L,m=d-w*E/L,h=B(h,H(l,y)),m=B(m,H(f,d)),h=H(h,B(l,y)),m=H(m,B(f,d)),P=y-h,w=d-m,I=y+P*L/E,k=d+w*L/E}n.bezierCurveTo(u,c,h,m,y,d),u=I,c=k}else n.lineTo(y,d)}l=y,f=d,g+=r}return b}var Je=function(){function n(){this.smooth=0,this.smoothConstraint=!0}return n}(),oa=function(n){q(t,n);function t(e){var a=n.call(this,e)||this;return a.type="ec-polyline",a}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Je},t.prototype.buildPath=function(e,a){var o=a.points,r=0,i=o.length/2;if(a.connectNulls){for(;i>0&&W(o[i*2-2],o[i*2-1]);i--);for(;r<i&&W(o[r*2],o[r*2+1]);r++);}for(;r<i;)r+=de(e,o,r,i,i,1,a.smooth,a.smoothMonotone,a.connectNulls)+1},t.prototype.getPointOn=function(e,a){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var o=this.path,r=o.data,i=gt.CMD,s,v,l=a==="x",f=[],u=0;u<r.length;){var c=r[u++],h=void 0,m=void 0,g=void 0,b=void 0,y=void 0,d=void 0,p=void 0;switch(c){case i.M:s=r[u++],v=r[u++];break;case i.L:if(h=r[u++],m=r[u++],p=l?(e-s)/(h-s):(e-v)/(m-v),p<=1&&p>=0){var S=l?(m-v)*p+v:(h-s)*p+s;return l?[e,S]:[S,e]}s=h,v=m;break;case i.C:h=r[u++],m=r[u++],g=r[u++],b=r[u++],y=r[u++],d=r[u++];var _=l?Pe(s,h,g,y,e,f):Pe(v,m,b,d,e,f);if(_>0)for(var A=0;A<_;A++){var D=f[A];if(D<=1&&D>=0){var S=l?Ce(v,m,b,d,D):Ce(s,h,g,y,D);return l?[e,S]:[S,e]}}s=y,v=d;break}}},t}(We),sa=function(n){q(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t}(Je),la=function(n){q(t,n);function t(e){var a=n.call(this,e)||this;return a.type="ec-polygon",a}return t.prototype.getDefaultShape=function(){return new sa},t.prototype.buildPath=function(e,a){var o=a.points,r=a.stackedOnPoints,i=0,s=o.length/2,v=a.smoothMonotone;if(a.connectNulls){for(;s>0&&W(o[s*2-2],o[s*2-1]);s--);for(;i<s&&W(o[i*2],o[i*2+1]);i++);}for(;i<s;){var l=de(e,o,i,s,s,1,a.smooth,v,a.connectNulls);de(e,r,i+l-1,l,s,-1,a.stackedOnSmooth,v,a.connectNulls),i+=l+1,e.closePath()}},t}(We);function ua(n,t,e,a,o){var r=n.getArea(),i=r.x,s=r.y,v=r.width,l=r.height,f=e.get(["lineStyle","width"])||0;i-=f/2,s-=f/2,v+=f,l+=f,v=Math.ceil(v),i!==Math.floor(i)&&(i=Math.floor(i),v++);var u=new pt({shape:{x:i,y:s,width:v,height:l}});if(t){var c=n.getBaseAxis(),h=c.isHorizontal(),m=c.inverse;h?(m&&(u.shape.x+=v),u.shape.width=0):(m||(u.shape.y+=l),u.shape.height=0);var g=Z(o)?function(b){o(b,u)}:null;se(u,{shape:{width:v,height:l,x:i,y:s}},e,null,a,g)}return u}function va(n,t,e){var a=n.getArea(),o=ee(a.r0,1),r=ee(a.r,1),i=new dt({shape:{cx:ee(n.cx,1),cy:ee(n.cy,1),r0:o,r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});if(t){var s=n.getBaseAxis().dim==="angle";s?i.shape.endAngle=a.startAngle:i.shape.r=o,se(i,{shape:{endAngle:a.endAngle,r}},e)}return i}function Fe(n,t){if(n.length===t.length){for(var e=0;e<n.length;e++)if(n[e]!==t[e])return;return!0}}function Ve(n){for(var t=1/0,e=1/0,a=-1/0,o=-1/0,r=0;r<n.length;){var i=n[r++],s=n[r++];isNaN(i)||(t=Math.min(i,t),a=Math.max(i,a)),isNaN(s)||(e=Math.min(s,e),o=Math.max(s,o))}return[[t,e],[a,o]]}function ze(n,t){var e=Ve(n),a=e[0],o=e[1],r=Ve(t),i=r[0],s=r[1];return Math.max(Math.abs(a[0]-i[0]),Math.abs(a[1]-i[1]),Math.abs(o[0]-s[0]),Math.abs(o[1]-s[1]))}function $e(n){return Ue(n)?n:n?.5:0}function ca(n,t,e){if(!e.valueDim)return[];for(var a=t.count(),o=j(a*2),r=0;r<a;r++){var i=qe(e,n,t,r);o[r*2]=i[0],o[r*2+1]=i[1]}return o}function U(n,t,e,a,o){var r=e.getBaseAxis(),i=r.dim==="x"||r.dim==="radius"?0:1,s=[],v=0,l=[],f=[],u=[],c=[];if(o){for(v=0;v<n.length;v+=2){var h=t||n;!isNaN(h[v])&&!isNaN(h[v+1])&&c.push(n[v],n[v+1])}n=c}for(v=0;v<n.length-2;v+=2)switch(u[0]=n[v+2],u[1]=n[v+3],f[0]=n[v],f[1]=n[v+1],s.push(f[0],f[1]),a){case"end":l[i]=u[i],l[1-i]=f[1-i],s.push(l[0],l[1]);break;case"middle":var m=(f[i]+u[i])/2,g=[];l[i]=g[i]=m,l[1-i]=f[1-i],g[1-i]=u[1-i],s.push(l[0],l[1]),s.push(g[0],g[1]);break;default:l[i]=f[i],l[1-i]=u[1-i],s.push(l[0],l[1])}return s.push(n[v++],n[v++]),s}function fa(n,t){var e=[],a=n.length,o,r;function i(f,u,c){var h=f.coord,m=(c-h)/(u.coord-h),g=At(m,[f.color,u.color]);return{coord:c,color:g}}for(var s=0;s<a;s++){var v=n[s],l=v.coord;if(l<0)o=v;else if(l>t){r?e.push(i(r,v,t)):o&&e.push(i(o,v,0),i(o,v,t));break}else o&&(e.push(i(o,v,0)),o=null),e.push(v),r=v}return e}function ha(n,t,e){var a=n.getVisual("visualMeta");if(!(!a||!a.length||!n.count())&&t.type==="cartesian2d"){for(var o,r,i=a.length-1;i>=0;i--){var s=n.getDimensionInfo(a[i].dimension);if(o=s&&s.coordDim,o==="x"||o==="y"){r=a[i];break}}if(r){var v=t.getAxis(o),l=oe(r.stops,function(p){return{coord:v.toGlobalCoord(v.dataToCoord(p.value)),color:p.color}}),f=l.length,u=r.outerColors.slice();f&&l[0].coord>l[f-1].coord&&(l.reverse(),u.reverse());var c=fa(l,o==="x"?e.getWidth():e.getHeight()),h=c.length;if(!h&&f)return l[0].coord<0?u[1]?u[1]:l[f-1].color:u[0]?u[0]:l[0].color;var m=10,g=c[0].coord-m,b=c[h-1].coord+m,y=b-g;if(y<.001)return"transparent";ie(c,function(p){p.offset=(p.coord-g)/y}),c.push({offset:h?c[h-1].offset:.5,color:u[1]||"transparent"}),c.unshift({offset:h?c[0].offset:.5,color:u[0]||"transparent"});var d=new _t(0,0,0,0,c,!0);return d[o]=g,d[o+"2"]=b,d}}}function ma(n,t,e){var a=n.get("showAllSymbol"),o=a==="auto";if(!(a&&!o)){var r=e.getAxesByScale("ordinal")[0];if(r&&!(o&&ga(r,t))){var i=t.mapDimension(r.dim),s={};return ie(r.getViewLabels(),function(v){var l=r.scale.getRawOrdinalNumber(v.tickValue);s[l]=1}),function(v){return!s.hasOwnProperty(t.get(i,v))}}}}function ga(n,t){var e=n.getExtent(),a=Math.abs(e[1]-e[0])/n.scale.count();isNaN(a)&&(a=0);for(var o=t.count(),r=Math.max(1,Math.round(o/5)),i=0;i<o;i+=r)if(Se.getSymbolSize(t,i)[n.isHorizontal()?1:0]*1.5>a)return!1;return!0}function pa(n,t){return isNaN(n)||isNaN(t)}function da(n){for(var t=n.length/2;t>0&&pa(n[t*2-2],n[t*2-1]);t--);return t-1}function xe(n,t){return[n[t*2],n[t*2+1]]}function ya(n,t,e){for(var a=n.length/2,o=e==="x"?0:1,r,i,s=0,v=-1,l=0;l<a;l++)if(i=n[l*2+o],!(isNaN(i)||isNaN(n[l*2+1-o]))){if(l===0){r=i;continue}if(r<=t&&i>=t||r>=t&&i<=t){v=l;break}s=l,r=i}return{range:[s,v],t:(t-r)/(i-r)}}function Qe(n){if(n.get(["endLabel","show"]))return!0;for(var t=0;t<Oe.length;t++)if(n.get([Oe[t],"endLabel","show"]))return!0;return!1}function me(n,t,e,a){if(ta(t,"cartesian2d")){var o=a.getModel("endLabel"),r=o.get("valueAnimation"),i=a.getData(),s={lastFrameIndex:0},v=Qe(a)?function(h,m){n._endLabelOnDuring(h,m,i,s,r,o,t)}:null,l=t.getBaseAxis().isHorizontal(),f=ua(t,e,a,function(){var h=n._endLabel;h&&e&&s.originalX!=null&&h.attr({x:s.originalX,y:s.originalY})},v);if(!a.get("clip",!0)){var u=f.shape,c=Math.max(u.width,u.height);l?(u.y-=c,u.height+=c*2):(u.x-=c,u.width+=c*2)}return v&&v(1,f),f}else return va(t,e,a)}function ba(n,t){var e=t.getBaseAxis(),a=e.isHorizontal(),o=e.inverse,r=a?o?"right":"left":"center",i=a?"middle":o?"top":"bottom";return{normal:{align:n.get("align")||r,verticalAlign:n.get("verticalAlign")||i}}}var Sa=function(n){q(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.init=function(){var e=new le,a=new ea;this.group.add(a.group),this._symbolDraw=a,this._lineGroup=e,this._changePolyState=yt(this._changePolyState,this)},t.prototype.render=function(e,a,o){var r=e.coordinateSystem,i=this.group,s=e.getData(),v=e.getModel("lineStyle"),l=e.getModel("areaStyle"),f=s.getLayout("points")||[],u=r.type==="polar",c=this._coordSys,h=this._symbolDraw,m=this._polyline,g=this._polygon,b=this._lineGroup,y=!a.ssr&&e.get("animation"),d=!l.isEmpty(),p=l.get("origin"),S=Ze(r,s,p),_=d&&ca(r,s,S),A=e.get("showSymbol"),D=e.get("connectNulls"),N=A&&!u&&ma(e,s,r),C=this._data;C&&C.eachItemGraphicEl(function(R,ue){R.__temp&&(i.remove(R),C.setItemGraphicEl(ue,null))}),A||h.remove(),i.add(b);var P=u?!1:e.get("step"),w;r&&r.getArea&&e.get("clip",!0)&&(w=r.getArea(),w.width!=null?(w.x-=.1,w.y-=.1,w.width+=.2,w.height+=.2):w.r0&&(w.r0-=.5,w.r+=.5)),this._clipShapeForSymbol=w;var I=ha(s,r,o)||s.getVisual("style")[s.getVisual("drawType")];if(!(m&&c.type===r.type&&P===this._step))A&&h.updateData(s,{isIgnore:N,clipShape:w,disableAnimation:!0,getSymbolPoint:function(R){return[f[R*2],f[R*2+1]]}}),y&&this._initSymbolLabelAnimation(s,r,w),P&&(_&&(_=U(_,f,r,P,D)),f=U(f,null,r,P,D)),m=this._newPolyline(f),d?g=this._newPolygon(f,_):g&&(b.remove(g),g=this._polygon=null),u||this._initOrUpdateEndLabel(e,r,we(I)),b.setClipPath(me(this,r,!0,e));else{d&&!g?g=this._newPolygon(f,_):g&&!d&&(b.remove(g),g=this._polygon=null),u||this._initOrUpdateEndLabel(e,r,we(I));var k=b.getClipPath();if(k){var M=me(this,r,!1,e);se(k,{shape:M.shape},e)}else b.setClipPath(me(this,r,!0,e));A&&h.updateData(s,{isIgnore:N,clipShape:w,disableAnimation:!0,getSymbolPoint:function(R){return[f[R*2],f[R*2+1]]}}),(!Fe(this._stackedOnPoints,_)||!Fe(this._points,f))&&(y?this._doUpdateAnimation(s,_,r,o,P,p,D):(P&&(_&&(_=U(_,f,r,P,D)),f=U(f,null,r,P,D)),m.setShape({points:f}),g&&g.setShape({points:f,stackedOnPoints:_})))}var O=e.getModel("emphasis"),T=O.get("focus"),V=O.get("blurScope"),E=O.get("disabled");if(m.useStyle(Ne(v.getLineStyle(),{fill:"none",stroke:I,lineJoin:"bevel"})),ke(m,e,"lineStyle"),m.style.lineWidth>0&&e.get(["emphasis","lineStyle","width"])==="bolder"){var L=m.getState("emphasis").style;L.lineWidth=+m.style.lineWidth+1}ae(m).seriesIndex=e.seriesIndex,pe(m,T,V,E);var z=$e(e.get("smooth")),$=e.get("smoothMonotone");if(m.setShape({smooth:z,smoothMonotone:$,connectNulls:D}),g){var J=s.getCalculationInfo("stackedOnSeries"),G=0;g.useStyle(Ne(l.getAreaStyle(),{fill:I,opacity:.7,lineJoin:"bevel",decal:s.getVisual("style").decal})),J&&(G=$e(J.get("smooth"))),g.setShape({smooth:z,stackedOnSmooth:G,smoothMonotone:$,connectNulls:D}),ke(g,e,"areaStyle"),ae(g).seriesIndex=e.seriesIndex,pe(g,T,V,E)}var F=this._changePolyState;s.eachItemGraphicEl(function(R){R&&(R.onHoverStateChange=F)}),this._polyline.onHoverStateChange=F,this._data=s,this._coordSys=r,this._stackedOnPoints=_,this._points=f,this._step=P,this._valueOrigin=p,e.get("triggerLineEvent")&&(this.packEventData(e,m),g&&this.packEventData(e,g))},t.prototype.packEventData=function(e,a){ae(a).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},t.prototype.highlight=function(e,a,o,r){var i=e.getData(),s=Ee(i,r);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var v=i.getLayout("points"),l=i.getItemGraphicEl(s);if(!l){var f=v[s*2],u=v[s*2+1];if(isNaN(f)||isNaN(u)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(f,u))return;var c=e.get("zlevel")||0,h=e.get("z")||0;l=new Se(i,s),l.x=f,l.y=u,l.setZ(c,h);var m=l.getSymbolPath().getTextContent();m&&(m.zlevel=c,m.z=h,m.z2=this._polyline.z2+1),l.__temp=!0,i.setItemGraphicEl(s,l),l.stopSymbolAnimation(!0),this.group.add(l)}l.highlight()}else ve.prototype.highlight.call(this,e,a,o,r)},t.prototype.downplay=function(e,a,o,r){var i=e.getData(),s=Ee(i,r);if(this._changePolyState("normal"),s!=null&&s>=0){var v=i.getItemGraphicEl(s);v&&(v.__temp?(i.setItemGraphicEl(s,null),this.group.remove(v)):v.downplay())}else ve.prototype.downplay.call(this,e,a,o,r)},t.prototype._changePolyState=function(e){var a=this._polygon;Le(this._polyline,e),a&&Le(a,e)},t.prototype._newPolyline=function(e){var a=this._polyline;return a&&this._lineGroup.remove(a),a=new oa({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(a),this._polyline=a,a},t.prototype._newPolygon=function(e,a){var o=this._polygon;return o&&this._lineGroup.remove(o),o=new la({shape:{points:e,stackedOnPoints:a},segmentIgnoreThreshold:2}),this._lineGroup.add(o),this._polygon=o,o},t.prototype._initSymbolLabelAnimation=function(e,a,o){var r,i,s=a.getBaseAxis(),v=s.inverse;a.type==="cartesian2d"?(r=s.isHorizontal(),i=!1):a.type==="polar"&&(r=s.dim==="angle",i=!0);var l=e.hostModel,f=l.get("animationDuration");Z(f)&&(f=f(null));var u=l.get("animationDelay")||0,c=Z(u)?u(null):u;e.eachItemGraphicEl(function(h,m){var g=h;if(g){var b=[h.x,h.y],y=void 0,d=void 0,p=void 0;if(o)if(i){var S=o,_=a.pointToCoord(b);r?(y=S.startAngle,d=S.endAngle,p=-_[1]/180*Math.PI):(y=S.r0,d=S.r,p=_[0])}else{var A=o;r?(y=A.x,d=A.x+A.width,p=h.x):(y=A.y+A.height,d=A.y,p=h.y)}var D=d===y?0:(p-y)/(d-y);v&&(D=1-D);var N=Z(u)?u(m):f*D+c,C=g.getSymbolPath(),P=C.getTextContent();g.attr({scaleX:0,scaleY:0}),g.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:N}),P&&P.animateFrom({style:{opacity:0}},{duration:300,delay:N}),C.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(e,a,o){var r=e.getModel("endLabel");if(Qe(e)){var i=e.getData(),s=this._polyline,v=i.getLayout("points");if(!v){s.removeTextContent(),this._endLabel=null;return}var l=this._endLabel;l||(l=this._endLabel=new bt({z2:200}),l.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var f=da(v);f>=0&&(He(s,be(e,"endLabel"),{inheritColor:o,labelFetcher:e,labelDataIndex:f,defaultText:function(u,c,h){return h!=null?Kt(i,h):je(i,u)},enableTextSetter:!0},ba(r,a)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(e,a,o,r,i,s,v){var l=this._endLabel,f=this._polyline;if(l){e<1&&r.originalX==null&&(r.originalX=l.x,r.originalY=l.y);var u=o.getLayout("points"),c=o.hostModel,h=c.get("connectNulls"),m=s.get("precision"),g=s.get("distance")||0,b=v.getBaseAxis(),y=b.isHorizontal(),d=b.inverse,p=a.shape,S=d?y?p.x:p.y+p.height:y?p.x+p.width:p.y,_=(y?g:0)*(d?-1:1),A=(y?0:-g)*(d?-1:1),D=y?"x":"y",N=ya(u,S,D),C=N.range,P=C[1]-C[0],w=void 0;if(P>=1){if(P>1&&!h){var I=xe(u,C[0]);l.attr({x:I[0]+_,y:I[1]+A}),i&&(w=c.getRawValue(C[0]))}else{var I=f.getPointOn(S,D);I&&l.attr({x:I[0]+_,y:I[1]+A});var k=c.getRawValue(C[0]),M=c.getRawValue(C[1]);i&&(w=St(o,m,k,M,N.t))}r.lastFrameIndex=C[0]}else{var O=e===1||r.lastFrameIndex>0?C[0]:0,I=xe(u,O);i&&(w=c.getRawValue(O)),l.attr({x:I[0]+_,y:I[1]+A})}if(i){var T=Dt(l);typeof T.setLabelText=="function"&&T.setLabelText(w)}}},t.prototype._doUpdateAnimation=function(e,a,o,r,i,s,v){var l=this._polyline,f=this._polygon,u=e.hostModel,c=ia(this._data,e,this._stackedOnPoints,a,this._coordSys,o,this._valueOrigin),h=c.current,m=c.stackedOnCurrent,g=c.next,b=c.stackedOnNext;if(i&&(m=U(c.stackedOnCurrent,c.current,o,i,v),h=U(c.current,null,o,i,v),b=U(c.stackedOnNext,c.next,o,i,v),g=U(c.next,null,o,i,v)),ze(h,g)>3e3||f&&ze(m,b)>3e3){l.stopAnimation(),l.setShape({points:g}),f&&(f.stopAnimation(),f.setShape({points:g,stackedOnPoints:b}));return}l.shape.__points=c.current,l.shape.points=h;var y={shape:{points:g}};c.current!==h&&(y.shape.__points=c.next),l.stopAnimation(),re(l,y,u),f&&(f.setShape({points:h,stackedOnPoints:m}),f.stopAnimation(),re(f,{shape:{stackedOnPoints:b}},u),l.shape.points!==f.shape.points&&(f.shape.points=l.shape.points));for(var d=[],p=c.status,S=0;S<p.length;S++){var _=p[S].cmd;if(_==="="){var A=e.getItemGraphicEl(p[S].idx1);A&&d.push({el:A,ptIdx:S})}}l.animators&&l.animators.length&&l.animators[0].during(function(){f&&f.dirtyShape();for(var D=l.shape.__points,N=0;N<d.length;N++){var C=d[N].el,P=d[N].ptIdx*2;C.x=D[P],C.y=D[P+1],C.markRedraw()}})},t.prototype.remove=function(e){var a=this.group,o=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),o&&o.eachItemGraphicEl(function(r,i){r.__temp&&(a.remove(r),o.setItemGraphicEl(i,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(ve);function Da(n,t){return{seriesType:n,plan:It(),reset:function(e){var a=e.getData(),o=e.coordinateSystem;if(e.pipelineContext,!!o){var r=oe(o.dimensions,function(u){return a.mapDimension(u)}).slice(0,2),i=r.length,s=a.getCalculationInfo("stackResultDimension");ne(a,r[0])&&(r[0]=s),ne(a,r[1])&&(r[1]=s);var v=a.getStore(),l=a.getDimensionIndex(r[0]),f=a.getDimensionIndex(r[1]);return i&&{progress:function(u,c){for(var h=u.end-u.start,m=j(h*i),g=[],b=[],y=u.start,d=0;y<u.end;y++){var p=void 0;if(i===1){var S=v.get(l,y);p=o.dataToPoint(S,null,b)}else g[0]=v.get(l,y),g[1]=v.get(f,y),p=o.dataToPoint(g,null,b);m[d++]=p[0],m[d++]=p[1]}c.setLayout("points",m)}}}}}}var _a={average:function(n){for(var t=0,e=0,a=0;a<n.length;a++)isNaN(n[a])||(t+=n[a],e++);return e===0?NaN:t/e},sum:function(n){for(var t=0,e=0;e<n.length;e++)t+=n[e]||0;return t},max:function(n){for(var t=-1/0,e=0;e<n.length;e++)n[e]>t&&(t=n[e]);return isFinite(t)?t:NaN},min:function(n){for(var t=1/0,e=0;e<n.length;e++)n[e]<t&&(t=n[e]);return isFinite(t)?t:NaN},nearest:function(n){return n[0]}},Aa=function(n){return Math.round(n.length/2)};function Ia(n){return{seriesType:n,reset:function(t,e,a){var o=t.getData(),r=t.get("sampling"),i=t.coordinateSystem,s=o.count();if(s>10&&i.type==="cartesian2d"&&r){var v=i.getBaseAxis(),l=i.getOtherAxis(v),f=v.getExtent(),u=a.getDevicePixelRatio(),c=Math.abs(f[1]-f[0])*(u||1),h=Math.round(s/c);if(isFinite(h)&&h>1){r==="lttb"?t.setData(o.lttbDownSample(o.mapDimension(l.dim),1/h)):r==="minmax"&&t.setData(o.minmaxDownSample(o.mapDimension(l.dim),1/h));var m=void 0;Pt(r)?m=_a[r]:Z(r)&&(m=r),m&&t.setData(o.downSample(o.mapDimension(l.dim),1/h,m,Aa))}}}}}function Pa(n){n.registerChartView(Sa),n.registerSeriesModel(aa),n.registerLayout(Da("line")),n.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),a=t.getModel("lineStyle").getLineStyle();a&&!a.stroke&&(a.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",a)}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,Ia("line"))}const Ca={class:"trend-chart-container"},wa={class:"trend-chart-content"},Na={class:"trend-chart-filters"},ka={class:"trend-chart-wrapper"},Ea=Rt({__name:"TrendChart",setup(n){Ct([Nt,kt,Et,Lt,Ot,Pa]);const t=Q(!1),e=Q([]),a=Q([]),o=Q([]),r=Tt(),i=Q({dateRange:r,playerIds:[],profession:null}),s=Te(()=>i.value.profession?o.value.filter(u=>u.profession===i.value.profession).sort((u,c)=>u.id.localeCompare(c.id)).map(u=>({label:`${u.id} (${u.profession})`,value:`${u.id}:${u.profession}`})):o.value.sort((u,c)=>u.id.localeCompare(c.id)).map(u=>({label:`${u.id} (${u.profession})`,value:`${u.id}:${u.profession}`})));Me(()=>i.value.profession,()=>{i.value.playerIds=[]});const v=()=>{if(!e.value)return;const u=new Set,c=new Set,h=[];e.value.forEach(m=>{m.data.forEach(g=>{u.add(g.profession);const b=`${g.id}:${g.profession}`;c.has(b)||(c.add(b),h.push({id:g.id,profession:g.profession}))})}),a.value=Array.from(u).sort().map(m=>({label:m,value:m})),o.value=h},l=async()=>{t.value=!0;try{const u=await Mt({dateRange:i.value.dateRange,playerIds:[],profession:null});e.value=u,v()}catch(u){console.error("加载数据失败:",u),Vt.error("加载数据失败")}finally{t.value=!1}};Me(()=>i.value.dateRange,()=>{l()});const f=Te(()=>{if(!e.value||e.value.length===0)return{title:{text:"暂无数据",left:"center",top:"center"}};const u=[...e.value].sort((p,S)=>ce(p.date).valueOf()-ce(S.date).valueOf()),c=u.map(p=>p.date),h=new Map;u.forEach(p=>{p.data.forEach(S=>{const _=`${S.id}:${S.profession}`;h.has(_)||h.set(_,{id:S.id,profession:S.profession})})});const m=[];if(h.forEach(({id:p,profession:S},_)=>{const A=!i.value.profession||S===i.value.profession,D=i.value.playerIds.length===0||i.value.playerIds.includes(_);if(A&&D){const N=c.map(C=>{const P=u.find(I=>I.date===C);if(!P)return null;const w=P.data.find(I=>`${I.id}:${I.profession}`===_);return w?w.score:null});N.some(C=>C!==null)&&m.push({name:`${p} (${S})`,type:"line",smooth:!0,data:N,symbol:"circle",symbolSize:6,showSymbol:!0,lineStyle:{width:2},areaStyle:{opacity:.1}})}}),m.length===0)return{title:{text:"所选条件下暂无数据",left:"center",top:"center"}};const g=m.flatMap(p=>p.data).filter(p=>p!==null),b=Math.min(...g),y=Math.max(...g),d=(y-b)*.1;return{title:{text:"评分趋势分析",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:p=>{if(!Array.isArray(p)||p.length===0)return"";let _=`${p[0].axisValue}<br/>`;return p.forEach(A=>{const D=A.value;D!==null&&(_+=`${A.seriesName}: ${Number(D).toFixed(2)}<br/>`)}),_}},legend:{type:"scroll",top:30,data:m.map(p=>p.name)},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0,top:80},xAxis:{type:"category",boundaryGap:!1,data:c,axisLabel:{rotate:45,formatter:p=>ce(p).format("MM-DD")}},yAxis:{type:"value",name:"评分",min:Math.max(0,Math.floor(b-d)),max:Math.min(100,Math.ceil(y+d))},series:m.map((p,S)=>({...p,color:`hsl(${S*137.5%360}, 70%, 50%)`}))}});return Gt(()=>{l()}),(u,c)=>{const h=K("a-typography-title"),m=K("a-range-picker"),g=K("a-select"),b=K("a-space"),y=K("a-card");return xt(),Ft("div",Ca,[x(y,{class:"trend-chart-card","body-style":{padding:"24px",height:"100%"}},{default:te(()=>[fe("div",wa,[fe("div",Na,[x(b,{direction:"vertical",size:"middle",style:{width:"100%"}},{default:te(()=>[x(h,{level:4},{default:te(()=>c[3]||(c[3]=[zt("数据筛选")])),_:1,__:[3]}),x(b,null,{default:te(()=>[x(m,{value:i.value.dateRange,"onUpdate:value":c[0]||(c[0]=d=>i.value.dateRange=d),disabled:t.value,style:{width:"280px"}},null,8,["value","disabled"]),x(g,{value:i.value.profession,"onUpdate:value":c[1]||(c[1]=d=>i.value.profession=d),options:a.value,placeholder:"选择职业",disabled:t.value,style:{width:"200px"},"allow-clear":""},null,8,["value","options","disabled"]),x(g,{value:i.value.playerIds,"onUpdate:value":c[2]||(c[2]=d=>i.value.playerIds=d),options:s.value,placeholder:"选择玩家",disabled:t.value,style:{width:"300px"},mode:"multiple","allow-clear":""},null,8,["value","options","disabled"])]),_:1})]),_:1})]),fe("div",ka,[x($t(wt),{class:"trend-chart",option:f.value,loading:t.value,autoresize:""},null,8,["option","loading"])])])]),_:1})])}}}),Ma=Bt(Ea,[["__scopeId","data-v-000f7d2f"]]);export{Ma as default};
