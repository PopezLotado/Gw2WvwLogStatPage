import{a as d}from"./index-BZRtW_hy.js";const l=(t,a)=>{const r=[];let e=d(t);const n=d(a);for(;e.isBefore(n)||e.isSame(n,"day");)r.push(e.format("YYYY-MM-DD")),e=e.add(1,"day");return r},D=async t=>{try{const a=await fetch(`/data/${t}.json`);return a.ok?await a.json():(console.warn(`无法加载 ${t} 的数据`),[])}catch(a){return console.error(`加载 ${t} 数据失败:`,a),[]}},y=()=>{const t=d();return[t.subtract(7,"day"),t]},Y=async t=>{try{const a=t.dateRange[0].format("YYYY-MM-DD"),r=t.dateRange[1].format("YYYY-MM-DD"),n=l(a,r).map(async o=>{let s=await D(o);return t.playerIds.length>0&&(s=s.filter(c=>t.playerIds.includes(c.id))),t.profession&&(s=s.filter(c=>c.profession===t.profession)),{date:o,data:s}});return(await Promise.all(n)).filter(o=>o.data.length>0)}catch(a){return console.error("加载数据失败:",a),[]}};export{y as g,Y as l};
